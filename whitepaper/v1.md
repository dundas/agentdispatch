Excellent — below is a **fully comprehensive, publication-ready white paper** for the **Agent Dispatch Messaging Protocol (ADMP)**.
It combines the structure and tone of a formal **RFC-style technical standard** with narrative and rationale sections typical of a modern **white paper**.

You can use this document for internal engineering circulation, external publication, or standards-body submission (e.g., the *Open Agent Protocol Alliance*).

---

# **Agent Dispatch Messaging Protocol (ADMP)**

### *A Universal Inbox Standard for Autonomous Agents*

**Version:** 1.0-draft
**Date:** October 2025
**Authors:** Agent Dispatch Working Group (ADWG)
**Contact:** [standards@agentdispatch.org](mailto:standards@agentdispatch.org)
**License:** CC BY 4.0
**Keywords:** Autonomous Agents, Messaging, Inbox Protocol, Federation, A2A, MCP, SMTP, HTTP

---

## **Abstract**

As autonomous software agents proliferate—coding assistants, storage agents, AI service workers—there remains no universal mechanism for **reliable, secure, structured message exchange** among them.
The **Agent Dispatch Messaging Protocol (ADMP)** defines a unified, minimal, and extensible framework for inter-agent communication built on two principles:

1. Every agent has an **inbox**.
2. Every message follows the same **contract**—regardless of transport.

ADMP specifies message format, delivery semantics, authentication, and interoperability rules for both **HTTP** and **SMTP** transports.
It provides the infrastructure for a global network of agents that can **send**, **receive**, and **acknowledge** messages with deterministic outcomes, security, and auditability—independent of vendor or environment.

---

## **1. Introduction**

### 1.1. Motivation

Autonomous and semi-autonomous agents now write code, deploy infrastructure, operate APIs, and even collaborate across teams.
Yet communication among these agents remains **ad hoc**.
Each system reinvents message passing—via HTTP APIs, queues, or chat channels—creating brittle, ungovernable webs of interaction.

Human users have **SMTP** for email and **HTTP** for the web.
Agents need a **machine-native messaging fabric**—structured, verifiable, and interoperable.

ADMP fills that gap by defining:

* A universal **message envelope** (JSON)
* A consistent **inbox model**
* Minimal verbs: `SEND`, `PULL`, `ACK`, `NACK`, `REPLY`
* Cryptographically signed identity and policy enforcement
* Optional **cross-domain federation** using SMTP or HTTP

---

### 1.2. Design Goals

| Goal                       | Description                                                      |
| -------------------------- | ---------------------------------------------------------------- |
| **Deterministic delivery** | Guaranteed at-least-once semantics with explicit acknowledgment. |
| **Security by default**    | Every message signed and timestamped.                            |
| **Transport independence** | Works over HTTP, SMTP, A2A, or future bindings.                  |
| **Federation-ready**       | Uses existing DNS and PKI for domain-level trust.                |
| **Extensible**             | Minimal core, pluggable capabilities.                            |
| **Auditable**              | Every state transition logged and traceable.                     |

---

### 1.3. Terminology

| Term             | Meaning                                                                                          |
| ---------------- | ------------------------------------------------------------------------------------------------ |
| **Agent**        | A logical entity (AI model, service, or micro-agent) capable of sending/receiving ADMP messages. |
| **Inbox**        | Persistent message queue assigned to an agent.                                                   |
| **Dispatch Hub** | Server implementing ADMP delivery, persistence, and policy.                                      |
| **Bridge**       | Translator between transports (e.g., SMTP ↔ HTTP).                                               |
| **Envelope**     | Canonical JSON representation of a message.                                                      |

---

## **2. Protocol Overview**

ADMP operates as a **message transport layer** between agents.
Each agent can **send** messages to others through a Dispatch Hub, which delivers them into target inboxes.
The protocol guarantees deterministic delivery and unified semantics whether over HTTP or SMTP.

### 2.1. Architecture Summary

```
Agent A ──(HTTP/SMTP)──▶ Dispatch Hub ──▶ Inbox (Agent B)
                           │
                     Unified Data Store
                           │
                     Metrics / Policy / Audit
```

Two ingress paths—**HTTP** (for internal agents) and **SMTP** (for external/federated agents)—share the same datastore and delivery logic.

---

## **3. Message Model**

### 3.1. JSON Envelope

All messages conform to a canonical structure:

```json
{
  "version": "1.0",
  "id": "uuid",
  "type": "task.request",
  "from": "agent://auth.backend",
  "to": "agent://storage.pg",
  "subject": "create_user",
  "correlation_id": "c-12345",
  "headers": {"priority":"high"},
  "body": {"email":"user@example.com","name":"Test"},
  "ttl_sec": 86400,
  "timestamp": "2025-10-22T17:30:00Z",
  "signature": {
    "alg": "ed25519",
    "kid": "yourco.com/key-2025-10-01",
    "sig": "base64..."
  }
}
```

### 3.2. Reserved Fields

| Field            | Description                                               |
| ---------------- | --------------------------------------------------------- |
| `id`             | Unique UUID per message                                   |
| `from` / `to`    | Agent URIs                                                |
| `type`           | Logical category (`task.request`, `task.result`, `event`) |
| `subject`        | Short task/action name                                    |
| `correlation_id` | Links requests and replies                                |
| `ttl_sec`        | Time-to-live before expiry                                |
| `signature`      | Proof of origin (HMAC/Ed25519)                            |
| `timestamp`      | Creation time (used for replay protection)                |

---

### 3.3. Message Lifecycle

```
queued → delivered → leased → acked
                    ↘
                     → nack → queued
```

* **Queued**: Accepted into hub
* **Delivered**: Written to inbox
* **Leased**: Pulled by agent for processing
* **Acked**: Successfully processed
* **Nacked**: Requeued for retry
* **Dead**: Expired or max attempts reached

---

## **4. Operations**

### 4.1. Verb Summary

| Verb      | Purpose                                    |
| --------- | ------------------------------------------ |
| **SEND**  | Submit a message to another agent’s inbox. |
| **PULL**  | Retrieve a message for processing.         |
| **ACK**   | Confirm successful completion.             |
| **NACK**  | Reject or defer processing.                |
| **REPLY** | Return a correlated response to sender.    |

---

## **5. Delivery Semantics**

### 5.1. Reliability

* **At-least-once** delivery model
* **Idempotency** via `Idempotency-Key` header or body field
* **Leasing**: prevents loss during agent crash
* **TTL**: messages expire gracefully
* **Dead-letter queues** for diagnostics

### 5.2. Ordering

FIFO per agent queue; no guarantee across agents.

### 5.3. Idempotency Rules

Duplicate inserts (same `(to_agent_id, idempotency_key)`) must return the same message ID rather than create new records.

---

## **6. Security Architecture**

### 6.1. Authentication

Two trust models:

* **Internal (HTTP):** Bearer tokens or HMAC signatures
* **Federated (SMTP):** Ed25519 signatures + DKIM + domain trust

### 6.2. Message Signing

Canonical base string:

```
timestamp + "\n" + sha256(body) + "\n" + from + "\n" + to + "\n" + correlation_id
```

### 6.3. Replay Protection

Messages older than ±5 minutes are rejected.

### 6.4. Key Discovery

Agents publish keys through:

* DNS TXT: `_agentkeys.<domain>`
* HTTP JWKS: `https://<domain>/.well-known/agent-keys.json`

### 6.5. Policy Enforcement

Each hub enforces policies defining who can send to whom and under what constraints.

Example rule:

```json
{
  "from": "auth.backend",
  "to": "storage.pg",
  "types": ["task.request"],
  "subjects": ["^create_user$"],
  "max_size_kb": 256
}
```

---

## **7. Transport Bindings**

### 7.1. HTTP Binding (internal)

| Method | Path                                | Operation    |
| ------ | ----------------------------------- | ------------ |
| POST   | /v1/agents/{id}/messages            | SEND         |
| POST   | /v1/agents/{id}/inbox/pull          | PULL         |
| POST   | /v1/agents/{id}/messages/{id}/ack   | ACK          |
| POST   | /v1/agents/{id}/messages/{id}/nack  | NACK         |
| POST   | /v1/agents/{id}/messages/{id}/reply | REPLY        |
| GET    | /v1/messages/{id}/status            | Status query |

Authentication via Bearer token or HMAC signature.
Response codes: 201 (created), 204 (empty), 403 (policy), 409 (duplicate).

---

### 7.2. SMTP Binding (federated)

For cross-domain delivery, SMTP acts as a **message transport** while preserving the ADMP JSON envelope.

**Email structure:**

```
From: auth.backend@agents.yourco.com
To: storage.pg@agents.partner.com
Subject: [ADMP] task.request create_user (c-12345)
Content-Type: application/json

{ ...ADMP envelope... }

X-Agent-ID: auth.backend
X-Agent-KID: yourco.com/key-2025-10-01
X-Agent-Signature: <base64>
X-Agent-Timestamp: 2025-10-22T17:30:00Z
```

SMTP delivery confirmed via:

* **2xx** → `sent`
* **DSN 2.0.0** → `delivered`
* **5.x.x** → `failed`

Inbound bridge validates DKIM + `X-Agent-*` headers → inserts message into same inbox table used by HTTP.

---

### 7.3. Common Datastore

Both layers share one queue schema (PostgreSQL) ensuring consistent semantics.

| Field                | Purpose                             |
| -------------------- | ----------------------------------- |
| `channel`            | http / smtp                         |
| `status`             | queued / delivered / acked / failed |
| `source_fingerprint` | sha256 for deduplication            |
| `delivery_log`       | JSONB array of DSN/webhook events   |

---

## **8. Federation Model**

### 8.1. Domain Identity

Domain verification through DKIM or TLS certificate.

### 8.2. Agent Identity

Agent-level verification via Ed25519 signature.

### 8.3. Policy Synchronization

Domains exchange `/.well-known/admp-policy.json` to declare acceptable senders and scopes.

Example:

```json
{
  "accepts_from": ["agents.partner.com"],
  "requires_signature": true,
  "ttl_limit": 86400
}
```

### 8.4. Message Federation Flow

1. `Agent A` (yourco.com) signs + sends via SMTP.
2. Partner’s MX verifies DKIM and signature.
3. Partner’s bridge inserts into DB.
4. DSN returned → status updated.

---

## **9. Observability and Audit**

### 9.1. Event Log

All transitions are logged:

```json
{
  "message_id": "m-123",
  "event": "delivered",
  "timestamp": "2025-10-22T17:32Z",
  "channel": "smtp",
  "details": {"dsn": "2.0.0"}
}
```

### 9.2. Metrics

* Messages queued / delivered / failed
* Average delivery latency
* DSN success rate
* Policy denials
* Signature verification failures

### 9.3. Audit Ledger

Optional append-only log, hash-chained by message ID for tamper evidence.

---

## **10. Interoperability**

ADMP is transport-agnostic and maps cleanly to related standards.

| Protocol                         | Role                   | ADMP Mapping                                 |
| -------------------------------- | ---------------------- | -------------------------------------------- |
| **MCP (Model Context Protocol)** | Tool integration       | ADMP handles messaging between MCP endpoints |
| **A2A (Agent-to-Agent)**         | RPC/task exchange      | ADMP provides transport semantics            |
| **SMTP**                         | Cross-domain delivery  | ADMP message as JSON payload                 |
| **HTTP REST**                    | Intra-domain transport | ADMP verbs as endpoints                      |

---

## **11. Reference Implementation**

### 11.1. Agent Dispatch OSS

Open-source under Apache 2.0
GitHub: [agent-dispatch/agent-dispatch](https://github.com/agent-dispatch)

Components:

* `dispatch-server`: HTTP + Postgres core
* `smtp-bridge`: DKIM validation + DSN mapper
* `sdk-python/js/go`: language clients
* `dashboard`: React monitoring UI
* `compliance-suite`: official ADMP validator

### 11.2. Compliance Test Categories

* Schema validation
* Signature verification
* Delivery lifecycle
* Idempotency behavior
* TTL + dead-letter correctness

---

## **12. Governance and Versioning**

### 12.1. Maintenance

Maintained by the **Agent Dispatch Working Group (ADWG)** under the **Agent Protocol Foundation (APF)**.

### 12.2. Versioning Policy

* **Major**: breaking changes to envelope or semantics
* **Minor**: new bindings or fields
* **Patch**: editorial or test-suite updates

### 12.3. Open Standard Process

1. Draft → Community review
2. Candidate → Interop testing
3. Approved → Published at [admp.dev/specs/v1](https://admp.dev/specs/v1)

---

## **13. Security Considerations**

* Message tampering mitigated by signatures.
* Replay protection via timestamps.
* Key rotation mandatory every 90 days.
* Policies prevent abuse (rate limits, subject allowlists).
* TLS required for all transports.
* Optional encryption-at-rest in inbox datastore.

---

## **14. Comparison with Related Systems**

| System     | Focus                | Limitation                  | ADMP Role                    |
| ---------- | -------------------- | --------------------------- | ---------------------------- |
| SMTP       | Universal, reliable  | Human-centric, unstructured | Machine-native envelope      |
| AMQP/Kafka | High throughput      | Closed ecosystems           | Lightweight + federated      |
| MCP        | Tool context sharing | No message delivery model   | ADMP transport layer         |
| A2A        | RPC-style tasks      | Tight runtime coupling      | Queued messaging abstraction |

---

## **15. Future Extensions**

* **Attachment handling** via object store references
* **Streaming responses** via WebSocket binding
* **Encryption layer** for confidential messages
* **Human oversight mode** (SMTP ↔ operator email)
* **Multi-recipient fanout** and group routing
* **Federation graph** using distributed ledger for policy synchronization

---

## **16. Conclusion**

The **Agent Dispatch Messaging Protocol (ADMP)** defines the first open, secure, and deterministic message transport for autonomous agents.
It enables a future where agents collaborate as predictably as web services and as interoperably as email—without custom middleware or vendor lock-in.

By standardizing message envelopes, delivery semantics, and security primitives, ADMP provides the foundation for a **unified agent communication fabric** across the modern software ecosystem.

> **ADMP — A reliable inbox for every agent.**

---

## **Appendix A — Example SMTP Message**

```
From: auth.backend@agents.yourco.com
To: storage.pg@agents.partner.com
Subject: [ADMP] task.request create_user (c-12345)
Content-Type: application/json
X-Agent-ID: auth.backend
X-Agent-KID: yourco.com/key-2025-10-01
X-Agent-Signature: VdO9hU…
X-Agent-Timestamp: 2025-10-22T17:30:00Z

{
  "version":"1.0",
  "id":"m-123",
  "type":"task.request",
  "from":"agent://auth.backend",
  "to":"agent://storage.pg",
  "subject":"create_user",
  "body":{"email":"user@example.com"},
  "correlation_id":"c-12345",
  "timestamp":"2025-10-22T17:30:00Z"
}
```

---

## **Appendix B — HTTP Flow Example**

```
# 1. Send message
POST /v1/agents/storage.pg/messages
→ 201 Created { "message_id": "m-123" }

# 2. Recipient pulls
POST /v1/agents/storage.pg/inbox/pull
→ 200 OK { ...message... }

# 3. Recipient replies
POST /v1/agents/storage.pg/messages/m-123/reply
→ 200 OK { "status":"acked" }

# 4. Sender checks status
GET /v1/messages/m-123/status
→ { "status": "acked" }
```

---

**Agent Dispatch Messaging Protocol (ADMP v1.0-draft)**
© 2025 Agent Dispatch via Derivative Labs. All rights reserved.

---

Would you like me to **generate this as a polished PDF** (with title page, table of contents, and section numbering) suitable for distribution or website publication (e.g., `admp.org/specs/v1`)?
